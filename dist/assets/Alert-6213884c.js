var gt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var r=(e,t,s)=>(gt(e,t,"read from private field"),s?s.call(e):t.get(e)),c=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},l=(e,t,s,i)=>(gt(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);var f=(e,t,s)=>(gt(e,t,"access private method"),s);import{S as Jt,p as At,h as w,s as lt,i as z,n as dt,k as Rt,l as Dt,t as ee,m as ut,o as se,q as re,u as Lt,v as yt,w as Kt,x as ie,r as g,y as Gt,A as pt,a as Xt,j as _t}from"./index-b79f56a3.js";var C,u,J,S,N,K,T,U,G,j,q,k,A,Q,V,D,W,X,St,Y,Ct,Z,Et,tt,Ot,et,wt,st,xt,rt,Tt,ft,Yt,Wt,ne=(Wt=class extends Jt{constructor(t,s){super();c(this,D);c(this,X);c(this,Y);c(this,Z);c(this,tt);c(this,et);c(this,st);c(this,rt);c(this,ft);c(this,C,void 0);c(this,u,void 0);c(this,J,void 0);c(this,S,void 0);c(this,N,void 0);c(this,K,void 0);c(this,T,void 0);c(this,U,void 0);c(this,G,void 0);c(this,j,void 0);c(this,q,void 0);c(this,k,void 0);c(this,A,void 0);c(this,Q,void 0);c(this,V,new Set);this.options=s,l(this,C,t),l(this,U,null),l(this,T,At()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,u).addObserver(this),jt(r(this,u),this.options)?f(this,D,W).call(this):this.updateResult(),f(this,tt,Ot).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return It(r(this,u),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return It(r(this,u),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,et,wt).call(this),f(this,st,xt).call(this),r(this,u).removeObserver(this)}setOptions(t){const s=this.options,i=r(this,u);if(this.options=r(this,C).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof w(this.options.enabled,r(this,u))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,rt,Tt).call(this),r(this,u).setOptions(this.options),s._defaulted&&!lt(this.options,s)&&r(this,C).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,u),observer:this});const n=this.hasListeners();n&&qt(r(this,u),i,this.options,s)&&f(this,D,W).call(this),this.updateResult(),n&&(r(this,u)!==i||w(this.options.enabled,r(this,u))!==w(s.enabled,r(this,u))||z(this.options.staleTime,r(this,u))!==z(s.staleTime,r(this,u)))&&f(this,X,St).call(this);const a=f(this,Y,Ct).call(this);n&&(r(this,u)!==i||w(this.options.enabled,r(this,u))!==w(s.enabled,r(this,u))||a!==r(this,Q))&&f(this,Z,Et).call(this,a)}getOptimisticResult(t){const s=r(this,C).getQueryCache().build(r(this,C),t),i=this.createResult(s,t);return oe(this,i)&&(l(this,S,i),l(this,K,this.options),l(this,N,r(this,u).state)),i}getCurrentResult(){return r(this,S)}trackResult(t,s){return new Proxy(t,{get:(i,n)=>(this.trackProp(n),s==null||s(n),n==="promise"&&!this.options.experimental_prefetchInRender&&r(this,T).status==="pending"&&r(this,T).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(i,n))})}trackProp(t){r(this,V).add(t)}getCurrentQuery(){return r(this,u)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=r(this,C).defaultQueryOptions(t),i=r(this,C).getQueryCache().build(r(this,C),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){return f(this,D,W).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,S)))}createResult(t,s){var kt;const i=r(this,u),n=this.options,a=r(this,S),o=r(this,N),R=r(this,K),d=t!==i?t.state:r(this,J),{state:v}=t;let h={...v},m=!1,p;if(s._optimisticResults){const O=this.hasListeners(),at=!O&&jt(t,s),L=O&&qt(t,i,s,n);(at||L)&&(h={...h,...re(v.data,t.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:F,errorUpdatedAt:_,status:b}=h;p=h.data;let nt=!1;if(s.placeholderData!==void 0&&p===void 0&&b==="pending"){let O;a!=null&&a.isPlaceholderData&&s.placeholderData===(R==null?void 0:R.placeholderData)?(O=a.data,nt=!0):O=typeof s.placeholderData=="function"?s.placeholderData((kt=r(this,q))==null?void 0:kt.state.data,r(this,q)):s.placeholderData,O!==void 0&&(b="success",p=Lt(a==null?void 0:a.data,O,s),m=!0)}if(s.select&&p!==void 0&&!nt)if(a&&p===(o==null?void 0:o.data)&&s.select===r(this,G))p=r(this,j);else try{l(this,G,s.select),p=s.select(p),p=Lt(a==null?void 0:a.data,p,s),l(this,j,p),l(this,U,null)}catch(O){l(this,U,O)}r(this,U)&&(F=r(this,U),p=r(this,j),_=Date.now(),b="error");const vt=h.fetchStatus==="fetching",mt=b==="pending",bt=b==="error",Ft=mt&&vt,Nt=p!==void 0,x={status:b,fetchStatus:h.fetchStatus,isPending:mt,isSuccess:b==="success",isError:bt,isInitialLoading:Ft,isLoading:Ft,data:p,dataUpdatedAt:h.dataUpdatedAt,error:F,errorUpdatedAt:_,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:vt,isRefetching:vt&&!mt,isLoadingError:bt&&!Nt,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:bt&&Nt,isStale:Ut(t,s),refetch:this.refetch,promise:r(this,T),isEnabled:w(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const O=ot=>{x.status==="error"?ot.reject(x.error):x.data!==void 0&&ot.resolve(x.data)},at=()=>{const ot=l(this,T,x.promise=At());O(ot)},L=r(this,T);switch(L.status){case"pending":t.queryHash===i.queryHash&&O(L);break;case"fulfilled":(x.status==="error"||x.data!==L.value)&&at();break;case"rejected":(x.status!=="error"||x.error!==L.reason)&&at();break}}return x}updateResult(){const t=r(this,S),s=this.createResult(r(this,u),this.options);if(l(this,N,r(this,u).state),l(this,K,this.options),r(this,N).data!==void 0&&l(this,q,r(this,u)),lt(s,t))return;l(this,S,s);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!r(this,V).size)return!0;const o=new Set(a??r(this,V));return this.options.throwOnError&&o.add("error"),Object.keys(r(this,S)).some(R=>{const y=R;return r(this,S)[y]!==t[y]&&o.has(y)})};f(this,ft,Yt).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,tt,Ot).call(this)}},C=new WeakMap,u=new WeakMap,J=new WeakMap,S=new WeakMap,N=new WeakMap,K=new WeakMap,T=new WeakMap,U=new WeakMap,G=new WeakMap,j=new WeakMap,q=new WeakMap,k=new WeakMap,A=new WeakMap,Q=new WeakMap,V=new WeakMap,D=new WeakSet,W=function(t){f(this,rt,Tt).call(this);let s=r(this,u).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(dt)),s},X=new WeakSet,St=function(){f(this,et,wt).call(this);const t=z(this.options.staleTime,r(this,u));if(Rt||r(this,S).isStale||!Dt(t))return;const i=ee(r(this,S).dataUpdatedAt,t)+1;l(this,k,ut.setTimeout(()=>{r(this,S).isStale||this.updateResult()},i))},Y=new WeakSet,Ct=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,u)):this.options.refetchInterval)??!1},Z=new WeakSet,Et=function(t){f(this,st,xt).call(this),l(this,Q,t),!(Rt||w(this.options.enabled,r(this,u))===!1||!Dt(r(this,Q))||r(this,Q)===0)&&l(this,A,ut.setInterval(()=>{(this.options.refetchIntervalInBackground||se.isFocused())&&f(this,D,W).call(this)},r(this,Q)))},tt=new WeakSet,Ot=function(){f(this,X,St).call(this),f(this,Z,Et).call(this,f(this,Y,Ct).call(this))},et=new WeakSet,wt=function(){r(this,k)&&(ut.clearTimeout(r(this,k)),l(this,k,void 0))},st=new WeakSet,xt=function(){r(this,A)&&(ut.clearInterval(r(this,A)),l(this,A,void 0))},rt=new WeakSet,Tt=function(){const t=r(this,C).getQueryCache().build(r(this,C),this.options);if(t===r(this,u))return;const s=r(this,u);l(this,u,t),l(this,J,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},ft=new WeakSet,Yt=function(t){yt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(r(this,S))}),r(this,C).getQueryCache().notify({query:r(this,u),type:"observerResultsUpdated"})})},Wt);function ae(e,t){return w(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jt(e,t){return ae(e,t)||e.state.data!==void 0&&It(e,t,t.refetchOnMount)}function It(e,t,s){if(w(t.enabled,e)!==!1&&z(t.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&Ut(e,t)}return!1}function qt(e,t,s,i){return(e!==t||w(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Ut(e,s)}function Ut(e,t){return w(t.enabled,e)!==!1&&e.isStaleByTime(z(t.staleTime,e))}function oe(e,t){return!lt(e.getCurrentResult(),t)}var I,P,E,M,$,ct,it,Mt,zt,ue=(zt=class extends Jt{constructor(t,s){super();c(this,$);c(this,it);c(this,I,void 0);c(this,P,void 0);c(this,E,void 0);c(this,M,void 0);l(this,I,t),this.setOptions(s),this.bindMethods(),f(this,$,ct).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const s=this.options;this.options=r(this,I).defaultMutationOptions(t),lt(this.options,s)||r(this,I).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,E),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Kt(s.mutationKey)!==Kt(this.options.mutationKey)?this.reset():((i=r(this,E))==null?void 0:i.state.status)==="pending"&&r(this,E).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,E))==null||t.removeObserver(this)}onMutationUpdate(t){f(this,$,ct).call(this),f(this,it,Mt).call(this,t)}getCurrentResult(){return r(this,P)}reset(){var t;(t=r(this,E))==null||t.removeObserver(this),l(this,E,void 0),f(this,$,ct).call(this),f(this,it,Mt).call(this)}mutate(t,s){var i;return l(this,M,s),(i=r(this,E))==null||i.removeObserver(this),l(this,E,r(this,I).getMutationCache().build(r(this,I),this.options)),r(this,E).addObserver(this),r(this,E).execute(t)}},I=new WeakMap,P=new WeakMap,E=new WeakMap,M=new WeakMap,$=new WeakSet,ct=function(){var s;const t=((s=r(this,E))==null?void 0:s.state)??ie();l(this,P,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},it=new WeakSet,Mt=function(t){yt.batch(()=>{var s,i,n,a,o,R,y,d;if(r(this,M)&&this.hasListeners()){const v=r(this,P).variables,h=r(this,P).context,m={client:r(this,I),meta:this.options.meta,mutationKey:this.options.mutationKey};(t==null?void 0:t.type)==="success"?((i=(s=r(this,M)).onSuccess)==null||i.call(s,t.data,v,h,m),(a=(n=r(this,M)).onSettled)==null||a.call(n,t.data,null,v,h,m)):(t==null?void 0:t.type)==="error"&&((R=(o=r(this,M)).onError)==null||R.call(o,t.error,v,h,m),(d=(y=r(this,M)).onSettled)==null||d.call(y,void 0,t.error,v,h,m))}this.listeners.forEach(v=>{v(r(this,P))})})},zt),Zt=g.createContext(!1),he=()=>g.useContext(Zt);Zt.Provider;function ce(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var le=g.createContext(ce()),de=()=>g.useContext(le),fe=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ye=e=>{g.useEffect(()=>{e.clearReset()},[e])},pe=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(n&&e.data===void 0||Gt(s,[e.error,i])),ve=e=>{if(e.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...n)=>s(i(...n)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},me=(e,t)=>e.isLoading&&e.isFetching&&!t,be=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Vt=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ge(e,t,s){var h,m,p,F,_;const i=he(),n=de(),a=pt(s),o=a.defaultQueryOptions(e);(m=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=i?"isRestoring":"optimistic",ve(o),fe(o,n),ye(n);const R=!a.getQueryCache().get(o.queryHash),[y]=g.useState(()=>new t(a,o)),d=y.getOptimisticResult(o),v=!i&&e.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(b=>{const nt=v?y.subscribe(yt.batchCalls(b)):dt;return y.updateResult(),nt},[y,v]),()=>y.getCurrentResult(),()=>y.getCurrentResult()),g.useEffect(()=>{y.setOptions(o)},[o,y]),be(o,d))throw Vt(o,y,n);if(pe({result:d,errorResetBoundary:n,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((F=(p=a.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||F.call(p,o,d),o.experimental_prefetchInRender&&!Rt&&me(d,i)){const b=R?Vt(o,y,n):(_=a.getQueryCache().get(o.queryHash))==null?void 0:_.promise;b==null||b.catch(dt).finally(()=>{y.updateResult()})}return o.notifyOnChangeProps?d:y.trackResult(d)}function Qt(e,t){return ge(e,ne,t)}function te(e,t){const s=pt(t),[i]=g.useState(()=>new ue(s,e));g.useEffect(()=>{i.setOptions(e)},[i,e]);const n=g.useSyncExternalStore(g.useCallback(o=>i.subscribe(yt.batchCalls(o)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=g.useCallback((o,R)=>{i.mutate(o,R).catch(dt)},[i]);if(n.error&&Gt(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}const Re="http://localhost:3001",$t=(e,t)=>{const s=new Error(e);return s.name="ApiError",s.status=t,s};async function ht(e,t){const s=`${Re}${e}`;try{const[i]=await Promise.all([fetch(s,{headers:{"Content-Type":"application/json",...t==null?void 0:t.headers},...t}),new Promise(n=>setTimeout(n,500))]);if(!i.ok)throw $t(`HTTP error! status: ${i.status}`,i.status);return await i.json()}catch(i){throw i instanceof Error&&i.name==="ApiError"?i:$t("Network error occurred",0)}}const H={get:e=>ht(e),post:(e,t)=>ht(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>ht(e,{method:"PUT",body:JSON.stringify(t)}),delete:e=>ht(e,{method:"DELETE"})},Ue={checkNameUnique:async(e,t)=>{try{const s=t?`/users?name=${encodeURIComponent(e)}&id_ne=${t}`:`/users?name=${encodeURIComponent(e)}`;return(await H.get(s)).length===0}catch(s){return console.warn("Failed to check name uniqueness:",s),!0}}},B={users:["users"],user:e=>["users",e],analytics:["analytics"],dashboard:["dashboard"]},Se=e=>{const t=new URLSearchParams;if(e.page&&t.set("_page",e.page.toString()),e.limit&&t.set("_limit",e.limit.toString()),e.sort){const s=(e.sort.startsWith("-"),e.sort);t.set("_sort",s)}return e.order&&t.set("_order",e.order),e.role&&e.role!=="all"&&t.set("role",e.role),e.status&&e.status!=="all"&&t.set("status",e.status),e.search&&t.set("q",e.search),e.nameLike&&t.set("name_like",e.nameLike),e.emailLike&&t.set("email_like",e.emailLike),t.toString()},Ce=e=>{const t=Se(e);return t?`/users?${t}`:"/users"};function Qe(e={}){return Qt({queryKey:[...B.users,"filtered",e],queryFn:async()=>{const t=Ce(e);return await H.get(t)},staleTime:5*60*1e3,refetchOnWindowFocus:!1})}function Pe(){return Qt({queryKey:B.analytics,queryFn:async()=>await H.get("/analytics"),refetchInterval:3e4})}function Fe(){return Qt({queryKey:["metrics"],queryFn:async()=>await H.get("/metrics")})}function Ne(){const e=pt();return te({mutationFn:async({id:t,...s})=>await H.put(`/users/${t}`,s),onSuccess:(t,s)=>{e.setQueryData(B.user(s.id),t),e.invalidateQueries({queryKey:B.users})}})}function ke(){const e=pt();return te({mutationFn:async t=>(await H.delete(`/users/${t}`),t),onSuccess:t=>{e.removeQueries({queryKey:B.user(t)}),e.invalidateQueries({queryKey:B.users})}})}const Bt=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ht=Xt,Ee=(e,t)=>s=>{var i;if((t==null?void 0:t.variants)==null)return Ht(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:a}=t,o=Object.keys(n).map(d=>{const v=s==null?void 0:s[d],h=a==null?void 0:a[d];if(v===null)return null;const m=Bt(v)||Bt(h);return n[d][m]}),R=s&&Object.entries(s).reduce((d,v)=>{let[h,m]=v;return m===void 0||(d[h]=m),d},{}),y=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((d,v)=>{let{class:h,className:m,...p}=v;return Object.entries(p).every(F=>{let[_,b]=F;return Array.isArray(b)?b.includes({...a,...R}[_]):{...a,...R}[_]===b})?[...d,h,m]:d},[]);return Ht(e,o,y,s==null?void 0:s.class,s==null?void 0:s.className)};function Pt(...e){return Xt(e)}const Oe=Ee("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),we=g.forwardRef(({className:e,variant:t,...s},i)=>_t.jsx("div",{ref:i,role:"alert",className:Pt(Oe({variant:t}),e),...s}));we.displayName="Alert";const xe=g.forwardRef(({className:e,...t},s)=>_t.jsx("h5",{ref:s,className:Pt("mb-1 font-medium leading-none tracking-tight",e),...t}));xe.displayName="AlertTitle";const Te=g.forwardRef(({className:e,...t},s)=>_t.jsx("div",{ref:s,className:Pt("text-sm [&_p]:leading-relaxed",e),...t}));Te.displayName="AlertDescription";export{we as A,Te as a,Qe as b,Fe as c,Pt as d,Ne as e,ke as f,Qt as g,Ue as h,Pe as u};
